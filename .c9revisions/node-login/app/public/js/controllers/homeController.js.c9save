{"ts":1354673192772,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\nfunction HomeController()\n{\n\n// bind event listeners to button clicks //\n\tvar that = this;\n\n// handle user logout //\n\t$('#btn-logout').click(function(){ that.attemptLogout(); });\n\n// confirm account deletion //\n\t$('#account-form-btn1').click(function(){$('.modal-confirm').modal('show')});\n\n// handle account deletion //\n\t$('.modal-confirm .submit').click(function(){ that.deleteAccount(); });\n\n\tthis.deleteAccount = function()\n\t{\n\t\t$('.modal-confirm').modal('hide');\n\t\tvar that = this;\n\t\t$.ajax({\n\t\t\turl: '/delete',\n\t\t\ttype: 'POST',\n\t\t\tdata: { id: $('#userId').val()},\n\t\t\tsuccess: function(data){\n\t \t\t\tthat.showLockedAlert('Your account has been deleted.<br>Redirecting you back to the homepage.');\n\t\t\t},\n\t\t\terror: function(jqXHR){\n\t\t\t\tconsole.log(jqXHR.responseText+' :: '+jqXHR.statusText);\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.attemptLogout = function()\n\t{\n\t\tvar that = this;\n\t\t$.ajax({\n\t\t\turl: \"/home\",\n\t\t\ttype: \"POST\",\n\t\t\tdata: {logout : true},\n\t\t\tsuccess: function(data){\n\t \t\t\tthat.showLockedAlert('You are now logged out.<br>Redirecting you back to the homepage.');\n\t\t\t},\n\t\t\terror: function(jqXHR){\n\t\t\t\tconsole.log(jqXHR.responseText+' :: '+jqXHR.statusText);\n\t\t\t}\n\t\t});\n\t}\n\n\tthis.showLockedAlert = function(msg){\n\t\t$('.modal-alert').modal({ show : false, keyboard : false, backdrop : 'static' });\n\t\t$('.modal-alert .modal-header h3').text('Success!');\n\t\t$('.modal-alert .modal-body p').html(msg);\n\t\t$('.modal-alert').modal('show');\n\t\t$('.modal-alert button').click(function(){window.location.href = '/';})\n\t\tsetTimeout(function(){window.location.href = '/';}, 3000);\n\t}\n}\n\nHomeController.prototype.onUpdateSuccess = function()\n{\n\t$('.modal-alert').modal({ show : false, keyboard : true, backdrop : true });\n\t$('.modal-alert .modal-header h3').text('Success!');\n\t$('.modal-alert .modal-body p').html('Your account has been updated.');\n\t$('.modal-alert').modal('show');\n\t$('.modal-alert button').off('click');\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":1904}]],"length":1904}
{"contributors":[],"silentsave":false,"ts":1354687493504,"patch":[[{"diffs":[[0,"\n// "],[-1,"bind event listeners to button clicks"],[1,"detektory zdarzen do klikniecia w przycisk"],[0," //\n"]],"start1":29,"start2":29,"length1":45,"length2":50},{"diffs":[[0,"\n// "],[-1,"handle user logout"],[1,"wylogowanie uzytkownika"],[0," //\n"]],"start1":97,"start2":97,"length1":26,"length2":31},{"diffs":[[0,"\n// "],[-1,"confirm account deletion"],[1,"potwierdzenie usuniecia uzytkownika"],[0," //\n"]],"start1":190,"start2":190,"length1":32,"length2":43},{"diffs":[[0,");\n\n"],[-1,"// handle account deletion //"],[0,""],[1,""],[0,"\n\t$("]],"start1":309,"start2":309,"length1":37,"length2":8},{"diffs":[[0,"rt('"],[-1,"Your account has been del"],[1,"Twoje konto zostalo usuni"],[0,"ete"],[-1,"d"],[0,".<br>"],[-1,"Redirecting you back to the homepage"],[1,"Zostaniesz przekierowany do strony glownej"],[0,".');"]],"start1":614,"start2":614,"length1":78,"length2":83},{"diffs":[[0,"rt('"],[-1,"You are now logged out.<br>Redirecting you back to the homepage"],[1,"Jestes wylogowany.<br>Zostaniesz przekierowany do strony glownej"],[0,".');"]],"start1":984,"start2":984,"length1":71,"length2":72},{"diffs":[[0,"ml('"],[-1,"Your account has been updated"],[1,"Twoje konto zostalo uaktualnione"],[0,".');"]],"start1":1788,"start2":1788,"length1":37,"length2":40}]],"length":1905,"saved":false}
